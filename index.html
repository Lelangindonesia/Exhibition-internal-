<!DOCTYPE html><html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Toko Online — Versi Lengkap (Siap Upload)</title>
  <meta name="description" content="Toko online sederhana: produk, detail, keranjang, login, admin, PWA" />  <style>
    :root{--primary:#ff6600;--bg:#f5f5f7;--card:#fff}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Arial,sans-serif;margin:0;background:var(--bg);color:#111}
    header{background:var(--primary);color:white;padding:14px 16px;display:flex;align-items:center;justify-content:space-between}
    header h1{margin:0;font-size:18px}
    .btn{background:var(--primary);color:#fff;padding:8px 12px;border:none;border-radius:8px;cursor:pointer}
    .cnt{max-width:1100px;margin:18px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px}

    /* product list */
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .card{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 2px 6px rgba(15,15,15,0.06)}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .card h3{margin:8px 0 6px;font-size:16px}
    .muted{color:#666;font-size:14px}

    /* sidebar cart */
    aside.cart{position:sticky;top:16px}
    .cart-list{max-height:420px;overflow:auto;padding-right:6px}
    .cart-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #eee}

    /* modals */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;padding:20px}
    .modal .box{width:100%;max-width:720px;background:white;padding:18px;border-radius:12px}

    /* forms & admin */
    label{display:block;margin:8px 0 4px;font-weight:600}
    input,textarea,select{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px}
    .row{display:flex;gap:10px}
    .row .col{flex:1}

    footer{margin-top:24px;padding:18px;text-align:center;color:#666}

    @media(max-width:900px){.grid{grid-template-columns:1fr}.cnt{padding:0 12px}}
  </style>  <!-- PWA manifest file will be provided separately (manifest.json) -->  <link rel="manifest" href="manifest.json">
</head>
<body>
  <header>
    <h1>Toko Online — Demo Lengkap</h1>
    <div style="display:flex;gap:10px;align-items:center">
      <button class="btn" id="btn-login">Login</button>
      <button class="btn" id="btn-admin">Admin</button>
    </div>
  </header>  <main class="cnt">
    <div class="grid">
      <div>
        <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px">
          <input id="search" placeholder="Cari produk..." style="flex:1;padding:10px;border-radius:10px;border:1px solid #ddd" />
          <select id="category" style="padding:10px;border-radius:10px;border:1px solid #ddd">
            <option value="all">Semua Kategori</option>
          </select>
        </div><section>
      <div class="products" id="productGrid"></div>
    </section>
  </div>

  <aside class="cart">
    <div class="card">
      <h3>Keranjang</h3>
      <div class="cart-list" id="cartList"></div>
      <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
        <strong>Total: Rp <span id="cartTotal">0</span></strong>
        <button class="btn" id="btnCheckout">Checkout</button>
      </div>
    </div>

    <div style="height:12px"></div>
    <div class="card" style="margin-top:10px">
      <h4>Informasi</h4>
      <p class="muted">Masuk / daftar untuk menyimpan riwayat pesanan. Admin bisa menambahkan produk.</p>
    </div>
  </aside>
</div>

<footer>© 2025 — Demo Toko Online</footer>

  </main>  <!-- Modals: product detail, login/register, checkout, admin -->  <div id="modalRoot"></div>  <script>
    // Data sample (could be replaced by fetching JSON file)
    const SAMPLE_PRODUCTS = [
      {id:1,title:'Kaos Polos',price:75000,category:'Pakaian',stock:12,desc:'Kaos nyaman untuk sehari-hari',img:'https://picsum.photos/seed/kaos/600/400'},
      {id:2,title:'Celana Jeans',price:150000,category:'Pakaian',stock:8,desc:'Celana jeans berkualitas',img:'https://picsum.photos/seed/jeans/600/400'},
      {id:3,title:'Earphone Bluetooth',price:199000,category:'Elektronik',stock:20,desc:'Suara jernih tanpa kabel',img:'https://picsum.photos/seed/earphone/600/400'},
      {id:4,title:'Botol Minum',price:45000,category:'Aksesoris',stock:30,desc:'Botol minum tahan panas',img:'https://picsum.photos/seed/botol/600/400'},
      {id:5,title:'Tas Punggung',price:240000,category:'Aksesoris',stock:5,desc:'Tas kuat dan stylish',img:'https://picsum.photos/seed/tas/600/400'}
    ];

    // --- localStorage keys ---
    const KEY_CART = 'demo_toko_cart_v1';
    const KEY_USER = 'demo_toko_user_v1';
    const KEY_PRODUCTS = 'demo_toko_products_v1';

    // Init storage: if products not present, seed
    if(!localStorage.getItem(KEY_PRODUCTS)) localStorage.setItem(KEY_PRODUCTS, JSON.stringify(SAMPLE_PRODUCTS));

    // Get products from storage
    function getProducts(){ return JSON.parse(localStorage.getItem(KEY_PRODUCTS) || '[]'); }
    function saveProducts(list){ localStorage.setItem(KEY_PRODUCTS, JSON.stringify(list)); }

    // Cart helpers
    function getCart(){ return JSON.parse(localStorage.getItem(KEY_CART) || '{}'); }
    function saveCart(c){ localStorage.setItem(KEY_CART, JSON.stringify(c)); }

    // User helpers
    function getUser(){ return JSON.parse(localStorage.getItem(KEY_USER) || 'null'); }
    function saveUser(u){ localStorage.setItem(KEY_USER, JSON.stringify(u)); }

    // UI renderers
    const productGrid = document.getElementById('productGrid');
    const categorySelect = document.getElementById('category');
    const searchInput = document.getElementById('search');
    const cartList = document.getElementById('cartList');
    const cartTotalEl = document.getElementById('cartTotal');
    const modalRoot = document.getElementById('modalRoot');

    function money(n){ return n.toLocaleString(); }

    function buildCategories(){
      const cats = ['Semua', ...new Set(getProducts().map(p=>p.category))];
      categorySelect.innerHTML = '<option value="all">Semua Kategori</option>';
      cats.forEach(c=>{
        if(c==='Semua') return; categorySelect.innerHTML += `<option value="${c}">${c}</option>`;
      })
    }

    function renderProducts(filter=''){
      const q = searchInput.value.trim().toLowerCase();
      const cat = categorySelect.value;
      const list = getProducts().filter(p => (cat==='all' || p.category===cat) && (p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q)));
      productGrid.innerHTML = '';
      list.forEach(p => {
        const el = document.createElement('div'); el.className='card';
        el.innerHTML = `
          <img src="${p.img}" alt="${p.title}" />
          <h3>${p.title}</h3>
          <div class="muted">Rp ${money(p.price)}</div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button class="btn" onclick="openDetail(${p.id})">Detail</button>
            <button onclick="addToCart(${p.id})" style="flex:1;border-radius:8px">Tambah</button>
          </div>
        `;
        productGrid.appendChild(el);
      });
    }

    // Product detail modal
    function openDetail(id){
      const p = getProducts().find(x=>x.id===id);
      if(!p) return;
      modalRoot.innerHTML = `
        <div class="modal" onclick="closeModal(event)">
          <div class="box" onclick="event.stopPropagation()">
            <div style="display:flex;gap:12px">
              <img src="${p.img}" style="width:45%;border-radius:8px" />
              <div style="flex:1">
                <h2>${p.title}</h2>
                <div class="muted">Kategori: ${p.category} · Stok: ${p.stock}</div>
                <h3 style="margin-top:10px">Rp ${money(p.price)}</h3>
                <p style="margin-top:8px">${p.desc}</p>
                <div style="margin-top:12px;display:flex;gap:8px">
                  <button class="btn" onclick="addToCart(${p.id});closeModal()">Tambah ke Keranjang</button>
                  <button onclick="closeModal()" style="border-radius:8px">Tutup</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    function closeModal(e){ if(e && e.target && e.target.classList.contains('modal')) modalRoot.innerHTML=''; else modalRoot.innerHTML=''; }

    // Cart functions
    function addToCart(id, qty=1){
      const p = getProducts().find(x=>x.id===id); if(!p) return alert('Produk tidak ditemukan');
      const c = getCart();
      const key = String(id);
      c[key] = c[key] ? {...c[key], qty: Math.min(p.stock, c[key].qty + qty)} : {id:p.id,title:p.title,price:p.price,qty:qty};
      saveCart(c); renderCart();
    }
    function removeFromCart(id){ const c=getCart(); delete c[String(id)]; saveCart(c); renderCart(); }
    function updateQty(id,qty){ const c=getCart(); if(qty<=0) delete c[String(id)]; else c[String(id)].qty=qty; saveCart(c); renderCart(); }

    function renderCart(){
      const c = getCart(); cartList.innerHTML=''; let total=0;
      Object.values(c).forEach(it=>{ total += it.price * it.qty; const el = document.createElement('div'); el.className='cart-item'; el.innerHTML=`<div>${it.title} x ${it.qty}</div><div>Rp ${money(it.price*it.qty)}</div>`; cartList.appendChild(el); });
      cartTotalEl.innerText = money(total);
    }

    // Checkout modal
    document.getElementById('btnCheckout').addEventListener('click',()=>{
      const c = getCart(); if(Object.keys(c).length===0) return alert('Keranjang kosong');
      openCheckout();
    });

    function openCheckout(){
      modalRoot.innerHTML = `
        <div class="modal" onclick="closeModal(event)">
          <div class="box" onclick="event.stopPropagation()">
            <h2>Checkout</h2>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
              <div>
                <label>Nama</label>
                <input id="co-name" />
                <label>HP</label>
                <input id="co-phone" />
                <label>Alamat</label>
                <textarea id="co-address"></textarea></div>
          <div>
            <h4>Ringkasan</h4>
            <div id="co-items" style="max-height:220px;overflow:auto"></div>
            <h3>Total: Rp <span id="co-total">0</span></h3>
            <div style="margin-top:8px"><button class="btn" onclick="placeOrder()">Kirim Pesanan</button></div>
          </div>
        </div>
      </div>
    </div>
  `;

  // render items
  const c = getCart(); let total=0; const container = document.getElementById('co-items'); container.innerHTML='';
  Object.values(c).forEach(it=>{ total += it.price*it.qty; container.innerHTML += `<div style=\"padding:6px 0;border-bottom:1px solid #eee\">${it.title} x ${it.qty} — Rp ${money(it.price*it.qty)}</div>`});
  document.getElementById('co-total').innerText = money(total);
}

function placeOrder(){
  const name = document.getElementById('co-name').value.trim();
  const phone = document.getElementById('co-phone').value.trim();
  const address = document.getElementById('co-address').value.trim();
  if(!name||!phone||!address) return alert('Isi semua data');
  const order = { id:`ORD-${Date.now()}`, customer:{name,phone,address}, items:Object.values(getCart()), total: cartTotalEl.innerText, createdAt:new Date().toISOString() };
  // store orders in localStorage (simple)
  const orders = JSON.parse(localStorage.getItem('demo_toko_orders_v1')||'[]'); orders.push(order); localStorage.setItem('demo_toko_orders_v1', JSON.stringify(orders));
  // clear cart
  saveCart({}); renderCart(); closeModal(); alert('Pesanan diterima. ID: '+order.id);
}

// Simple login/register (localStorage). Password stored in plain text — for demo only.
document.getElementById('btn-login').addEventListener('click',()=>openAuth());
function openAuth(){
  const user = getUser();
  modalRoot.innerHTML = `
    <div class="modal" onclick="closeModal(event)"><div class="box" onclick="event.stopPropagation()">
      <h2>${user? 'Akun Anda':'Masuk / Daftar'}</h2>
      ${user? `<p>Halo, ${user.name}</p><button class=\"btn\" onclick=\"logout()\">Logout</button>` : `
        <label>Nama</label><input id=\"reg-name\" />
        <label>Email</label><input id=\"reg-email\" />
        <label>Password</label><input id=\"reg-pass\" type=\"password\" />
        <div style=\"margin-top:10px;display:flex;gap:8px\">
          <button class=\"btn\" onclick=\"register()\">Daftar</button>
          <button onclick=\"showLogin()\">Sudah punya akun?</button>
        </div>
      `}
    </div></div>`;
}
function showLogin(){ modalRoot.innerHTML = `
  <div class="modal" onclick="closeModal(event)"><div class="box" onclick="event.stopPropagation()">
    <h2>Login</h2>
    <label>Email</label><input id="login-email" />
    <label>Password</label><input id="login-pass" type="password" />
    <div style="margin-top:10px;display:flex;gap:8px"><button class="btn" onclick="login()">Login</button><button onclick="openAuth()">Batal</button></div>
  </div></div>
`}

function register(){ const name=document.getElementById('reg-name').value.trim(); const email=document.getElementById('reg-email').value.trim(); const pass=document.getElementById('reg-pass').value; if(!name||!email||!pass) return alert('Isi semua'); saveUser({name,email,pass}); alert('Terdaftar'); closeModal(); }
function login(){ const email=document.getElementById('login-email').value.trim(); const pass=document.getElementById('login-pass').value; const user= getUser(); if(!user) return alert('Akun tidak ditemukan'); if(user.email!==email || user.pass!==pass) return alert('Email atau password salah'); alert('Login berhasil. Halo '+user.name); closeModal(); }
function logout(){ localStorage.removeItem(KEY_USER); alert('Logout'); closeModal(); }

// ADMIN: simple password gate (for demo only)
document.getElementById('btn-admin').addEventListener('click',()=>openAdminPrompt());
function openAdminPrompt(){ const pass = prompt('Masukkan password admin (demo):'); if(pass==='admin123'){ openAdminPanel(); } else alert('Password salah'); }

function openAdminPanel(){
  const list = getProducts();
  modalRoot.innerHTML = `
    <div class="modal" onclick="closeModal(event)"><div class="box" onclick="event.stopPropagation()">
      <h2>Admin — Kelola Produk</h2>
      <div style="display:grid;grid-template-columns:1fr 320px;gap:12px">
        <div>
          <div id="adminList"></div>
        </div>
        <div>
          <h4>Tambah Produk</h4>
          <label>Judul</label><input id="p-title" />
          <label>Harga</label><input id="p-price" type="number" />
          <label>Kategori</label><input id="p-cat" />
          <label>Stok</label><input id="p-stock" type="number" />
          <label>Gambar (URL)</label><input id="p-img" />
          <label>Deskripsi</label><textarea id="p-desc"></textarea>
          <div style="margin-top:8px"><button class="btn" onclick="adminAdd()">Simpan</button></div>
        </div>
      </div>
    </div></div>
  `;

  const adminList = document.getElementById('adminList'); adminList.innerHTML='';
  getProducts().forEach(p=>{ const el=document.createElement('div'); el.style.padding='8px'; el.style.borderBottom='1px solid #eee'; el.innerHTML=`<strong>${p.title}</strong><div class=\"muted\">Rp ${money(p.price)} · ${p.category}</div><div style=\"margin-top:6px\"><button onclick=\"adminEdit(${p.id})\">Edit</button> <button onclick=\"adminDelete(${p.id})\">Hapus</button></div>`; adminList.appendChild(el); });
}

function adminAdd(){ const title=document.getElementById('p-title').value.trim(); const price=Number(document.getElementById('p-price').value); const cat=document.getElementById('p-cat').value.trim(); const stock=Number(document.getElementById('p-stock').value); const img=document.getElementById('p-img').value.trim() || 'https://via.placeholder.com/600'; const desc=document.getElementById('p-desc').value.trim(); if(!title||!price) return alert('Isi judul & harga'); const list=getProducts(); const id = Date.now(); list.push({id,title,price,category:cat||'Umum',stock,desc,img}); saveProducts(list); alert('Produk ditambahkan'); renderProducts(); buildCategories(); openAdminPanel(); }
function adminDelete(id){ if(!confirm('Hapus produk?')) return; const list = getProducts().filter(p=>p.id!==id); saveProducts(list); renderProducts(); buildCategories(); openAdminPanel(); }
function adminEdit(id){ const p = getProducts().find(x=>x.id===id); const title = prompt('Judul',p.title); if(title===null) return; p.title = title; saveProducts(getProducts()); renderProducts(); openAdminPanel(); }

// init
buildCategories(); renderProducts(); renderCart();

// search & category events
searchInput.addEventListener('input',()=>renderProducts()); categorySelect.addEventListener('change',()=>renderProducts());

// register service worker for PWA
if('serviceWorker' in navigator){ navigator.serviceWorker.register('service-worker.js').then(()=>console.log('SW registered')).catch(e=>console.log('SW err',e)); }

// expose some functions to global so inline onclick can call them
window.openDetail = openDetail; window.addToCart = addToCart; window.closeModal = closeModal; window.addToCart = addToCart; window.openCheckout = openCheckout; window.removeFromCart = removeFromCart; window.updateQty = updateQty; window.adminEdit = adminEdit; window.adminDelete = adminDelete;

  </script>  <!--
    ADDITIONAL FILES (please create these 2 files in the same repo when you upload):

    1) manifest.json
    ------------------
    {
      "name": "Toko Online Demo",
      "short_name": "TokoDemo",
      "start_url": "./index.html",
      "display": "standalone",
      "background_color": "#ffffff",
      "theme_color": "#ff6600",
      "icons": [
        { "src": "icon-192.png", "sizes": "192x192", "type": "image/png" },
        { "src": "icon-512.png", "sizes": "512x512", "type": "image/png" }
      ]
    }

    2) service-worker.js
    ---------------------
    const CACHE_NAME = 'toko-online-cache-v1';
    const FILES_TO_CACHE = [
      './', './index.html', './manifest.json'
    ];
    self.addEventListener('install', evt => {
      evt.waitUntil(caches.open(CACHE_NAME).then(cache => cache.addAll(FILES_TO_CACHE)));
      self.skipWaiting();
    });
    self.addEventListener('activate', evt => { evt.waitUntil(self.clients.claim()); });
    self.addEventListener('fetch', evt => {
      evt.respondWith(caches.match(evt.request).then(resp => resp || fetch(evt.request)));
    });

    3) icons: buat icon-192.png & icon-512.png (gunakan tool online atau placeholder)

    README / upload instructions: upload these files to repo root: index.html, manifest.json, service-worker.js, icon-192.png, icon-512.png. Then enable GitHub Pages (branch: main, folder: /root). After Pages aktif, buka URL dan pada HP pilih "Add to Home Screen" untuk meng-install PWA.
  --></body>
</html>
